{% extends 'AppBundle:form:form-popup.html.twig' %}

{% block body %}
    {% set form = (form is defined ? form : (_form is defined ? _form : null)) %}
    {% set fields = (fields is defined ? fields : (_conf['fields'] is defined ? _conf['fields'] : null)) %}

    {% if (form and fields) %}
        {% for field in fields['form'] %}
            {% if field == 'rule' %}
                <div class="form-group">
                    {% include 'AppBundle:form:label.html.twig' with {
                        'formField': form[field],
                        'metadata': fields['metadata'][field]
                    } %}
                    <div class="col-sm-10"><div class="row">
                        <div class="col-sm-4">
                            {% include 'AppBundle:form:input.html.twig' with {
                                'field': field,
                                'formField': form[field],
                                'metadata': fields['metadata'][field]
                            } %}
                        </div>
                        <div class="col-sm-4">
                            {% include 'AppBundle:form:input.html.twig' with {
                                'field': 'ruleExpr',
                                'formField': form['ruleExpr'],
                                'metadata': fields['metadata']['ruleExpr']
                            } %}
                        </div>
                        <div class="col-sm-4">
                            {% include 'AppBundle:form:input.html.twig' with {
                                'field': 'ruleValue',
                                'formField': form['ruleValue'],
                                'metadata': fields['metadata']['ruleValue']
                            } %}
                        </div>
                    </div></div>
                </div>
            {% elseif (field == 'bonusServiceObj') %}
                <div class="form-group">
                    {% include 'AppBundle:form:label.html.twig' with {
                        'formField': form[field],
                        'metadata': fields['metadata'][field]
                    } %}
                    <div class="col-sm-10"><div class="row">
                        <div class="col-sm-4">
                            {% include 'AppBundle:form:input.html.twig' with {
                                'field': field,
                                'formField': form[field],
                                'metadata': fields['metadata'][field]
                            } %}
                        </div>
                        <div class="col-sm-4">
                            {% include 'AppBundle:form:input.html.twig' with {
                                'field': 'bonusMethod',
                                'formField': form['bonusMethod'],
                                'metadata': fields['metadata']['bonusMethod']
                            } %}
                        </div>
                        <div class="col-sm-4">
                            {% include 'AppBundle:form:input.html.twig' with {
                                'field': 'user_bonusValue',
                                'formField': form['user_bonusValue'],
                                'metadata': fields['metadata']['user_bonusValue']
                            } %}
                        </div>
                    </div></div>
                </div>
            {% elseif (field == 'paxToApplyType') %}
                <div class="form-group">
                    {% include 'AppBundle:form:label.html.twig' with {
                        'formField': form[field],
                        'metadata': fields['metadata'][field]
                    } %}
                    <div class="col-sm-10"><div class="row">
                        <div class="col-sm-6">
                            {% include 'AppBundle:form:input.html.twig' with {
                                'field': field,
                                'formField': form[field],
                                'metadata': fields['metadata'][field]
                            } %}
                        </div>
                        <div class="col-sm-6">
                            {% include 'AppBundle:form:input.html.twig' with {
                                'field': 'paxToApplyValue',
                                'formField': form['paxToApplyValue'],
                                'metadata': fields['metadata']['paxToApplyValue']
                            } %}
                        </div>
                    </div></div>
                </div>
            {% elseif (field == 'daysToApplyType') %}
                <div class="form-group">
                    {% include 'AppBundle:form:label.html.twig' with {
                        'formField': form[field],
                        'metadata': fields['metadata'][field]
                    } %}
                    <div class="col-sm-10"><div class="row">
                        <div class="col-sm-6">
                            {% include 'AppBundle:form:input.html.twig' with {
                                'field': field,
                                'formField': form[field],
                                'metadata': fields['metadata'][field]
                            } %}
                        </div>
                        <div class="col-sm-6">
                            {% include 'AppBundle:form:input.html.twig' with {
                                'field': 'daysToApplyValue',
                                'formField': form['daysToApplyValue'],
                                'metadata': fields['metadata']['daysToApplyValue']
                            } %}
                        </div>
                    </div></div>
                </div>
            {% elseif (field not in [
                'ruleExpr', 'ruleValue',
                'bonusMethod', 'user_bonusValue',
                'paxToApplyValue',
                'daysToApplyValue'
            ]) %}
                {% include 'AppBundle:form:field.html.twig' with {
                    'field': field,
                    'metadata': fields['metadata'][field],
                    'form': form
                } %}
            {% endif %}
        {% endfor %}
    {% endif %}
{% endblock %}