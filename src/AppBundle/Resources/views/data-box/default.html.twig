{% extends 'AppBundle:data-box:base.html.twig' %}
{% block body_container %}
    <div class="table-responsive">
        <form>
            <table class="data-table table table-striped table-bordered table-hover dataTables-example">
                <thead>
                <tr>
                    <th *ngFor="let searchField of _dataService.getSearch('fields')">{% verbatim %}{{ _dataService.getFields('metadata')[searchField].label }}{% endverbatim %}</th>
                    <th>&nbsp;</th>
                </tr>
                </thead>
                <tbody>
                <template ngFor let-obj [ngForOf]="_dataService.getProviderAttr('objects')" let-objIndex="index"><tr
                          (dblclick)="editAction($event, objIndex)"
                          [class.disabled]="obj.hasOwnProperty('isEnabled') && (obj.isEnabled.search('fa-ban') > 0)">
                    <td *ngFor="let searchField of _dataService.getSearch('fields')"
                        [ngClass]="getColAlign(searchField)"
                        [innerHTML]="obj[searchField]"></td>
                    <td>
                        <span *ngIf="obj['_isNew']" class="badge badge-info">New</span>
                        <span *ngIf="obj['_isEdited']" class="badge badge-info">Edited</span>
                        <input *ngIf="_actionsService.getActionAttr('checkAll', 'isEnabled')"
                               class="pull-right action js_checkAll"
                               type="checkbox"
                               name="index[]"
                               value="{% verbatim %}{{objIndex}}{% endverbatim %}"
                               [ngModel]="checkAll"/>
                        <div class="pull-right actions no-user-select" (click)="triggerAction($event)">
                            <template ngFor let-action [ngForOf]="_actionsService.getDetailActions()">
                                <a *ngIf="_actionsService.getActionAttr(action, 'isEnabled')"
                                   [ngClass]="[_actionsService.getActionAttr(action, 'icon')]"
                                   class="fa"
                                   [attr.data-action]="action"
                                   [attr.data-value]="objIndex"></a>
                            </template>
                        </div>
                    </td>
                </tr></template>
                </tbody>
            </table>
        </form>
    </div>
{% endblock %}

{% block after_container %}{% endblock %}